/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => EmacsTextEditorPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var insertableSpecialKeys = [
  "Comma",
  "Period",
  "Slash",
  "Semicolon",
  "Quote",
  "BracketLeft",
  "BracketRight",
  "Backslash",
  "Backquote",
  "Minus",
  "Equal"
];
function isEventInterruptSelection(e) {
  return e.code == "Backspace" || e.code == "Delete" || Boolean(e.code.match(/^Key[A-Z]$/)) || Boolean(e.code.match(/^Digit[0-9]$/)) || Boolean(e.code.match(/^Numpad[0-9]$/)) || insertableSpecialKeys.includes(e.code);
}
var EmacsTextEditorPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.pluginTriggerSelection = false;
    this.disableSelectionWhenPossible = false;
  }
  onload() {
    console.log("loading plugin: Emacs text editor");
    document.addEventListener("keydown", (e) => {
      if (isEventInterruptSelection(e)) {
        this.disableSelectionWhenPossible = true;
        this.pluginTriggerSelection = false;
      }
    });
    this.addCommand({
      id: "forward-char",
      name: "Forward char",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goRight");
        });
      }
    });
    this.addCommand({
      id: "backward-char",
      name: "Backward char",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goLeft");
        });
      }
    });
    this.addCommand({
      id: "next-line",
      name: "Next line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goDown");
        });
      }
    });
    this.addCommand({
      id: "previous-line",
      name: "Previous line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goUp");
        });
      }
    });
    this.addCommand({
      id: "forward-word",
      name: "Forward word",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goWordRight");
        });
      }
    });
    this.addCommand({
      id: "backward-word",
      name: "Backward word",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goWordLeft");
        });
      }
    });
    this.addCommand({
      id: "move-end-of-line",
      name: "Move end of line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          const lineContent = editor.getLine(cursor.line);
          editor.setCursor({
            line: cursor.line,
            ch: lineContent.length
          });
        });
      }
    });
    this.addCommand({
      id: "move-beginning-of-line",
      name: "Move cursor to beginning of line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          editor.setCursor({ line: cursor.line, ch: 0 });
        });
      }
    });
    this.addCommand({
      id: "move-beginning-of-line-like-homekey",
      name: "Move cursor after heading markdown of beginning of line (like a HOME key)",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          if (cursor.ch == 0)
            return;
          const line = editor.getLine(cursor.line);
          let result = line.match(/^#{1,6}\s/);
          if (result === null) {
            result = line.match(/^\s*\d+\.\s/);
          }
          if (result === null) {
            result = line.match(/^\s*(-\s(\[.\]\s)?)?/);
          }
          if (result !== null && result[0].length < cursor.ch) {
            editor.setCursor({ line: cursor.line, ch: result[0].length });
          } else {
            editor.setCursor({ line: cursor.line, ch: 0 });
          }
        });
      }
    });
    this.addCommand({
      id: "beginning-of-buffer",
      name: "Beginning of buffer",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goStart");
        });
      }
    });
    this.addCommand({
      id: "end-of-buffer",
      name: "End of buffer",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goEnd");
        });
      }
    });
    this.addCommand({
      id: "kill-line",
      name: "Kill line",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        const cursor = editor.getCursor();
        const lineContent = editor.getLine(cursor.line);
        if (lineContent === "") {
          editor.exec("deleteLine");
        } else {
          editor.setSelection(cursor, {
            line: cursor.line,
            ch: lineContent.length
          });
          this.putSelectionInClipboard(editor, 1 /* Cut */);
          editor.setCursor(cursor);
        }
      }
    });
    this.addCommand({
      id: "delete-char",
      name: "Delete char",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        this.withDeleteInText(editor, () => {
          editor.exec("goRight");
        });
      }
    });
    this.addCommand({
      id: "kill-word",
      name: "Kill word",
      editorCallback: (editor, _) => {
        this.withDeleteInText(editor, () => {
          editor.exec("goWordRight");
        });
      }
    });
    this.addCommand({
      id: "backward-kill-word",
      name: "Backward kill word",
      editorCallback: (editor, _) => {
        this.withDeleteInText(editor, () => {
          editor.exec("goWordLeft");
        });
      }
    });
    this.addCommand({
      id: "kill-ring-save",
      name: "Kill ring save",
      editorCallback: (editor, _) => {
        this.putSelectionInClipboard(editor, 0 /* Copy */);
      }
    });
    this.addCommand({
      id: "kill-region",
      name: "Kill region",
      editorCallback: (editor, _) => {
        this.putSelectionInClipboard(editor, 1 /* Cut */);
      }
    });
    this.addCommand({
      id: "yank",
      name: "Yank",
      editorCallback: async (editor, _) => {
        const clipboardContent = await navigator.clipboard.readText();
        const cursor = editor.getCursor();
        if (!this.getCurrentSelectionStart(editor)) {
          editor.replaceRange(clipboardContent, cursor);
        } else {
          editor.replaceSelection(clipboardContent);
          this.disableSelection(editor);
        }
        editor.setCursor(
          cursor.line,
          cursor.ch + clipboardContent.length
        );
        document.dispatchEvent(new ClipboardEvent("paste"));
      }
    });
    this.addCommand({
      id: "set-mark-command",
      name: "Set mark command",
      editorCallback: (editor, _) => {
        if (this.pluginTriggerSelection) {
          this.disableSelection(editor);
        } else {
          this.pluginTriggerSelection = true;
        }
        this.disableSelectionWhenPossible = false;
      }
    });
    this.addCommand({
      id: "keyboard-quit",
      name: "Keyboard-quit",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
      }
    });
    this.addCommand({
      id: "undo",
      name: "Undo",
      editorCallback: (editor, _) => {
        editor.undo();
      }
    });
    this.addCommand({
      id: "redo",
      name: "Redo",
      editorCallback: (editor, _) => {
        editor.redo();
      }
    });
    this.addCommand({
      id: "recenter-top-bottom",
      name: "Recenter",
      editorCallback: (editor, _) => {
        const cursor = editor.getCursor();
        const range = {
          from: { line: cursor.line, ch: cursor.ch },
          to: { line: cursor.line, ch: cursor.ch }
        };
        editor.scrollIntoView(range, true);
      }
    });
    this.addCommand({
      id: "forward-paragraph",
      name: "Forward paragraph",
      editorCallback: async (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          this.moveToNextParagraph(editor, 0 /* Forward */);
        });
      }
    });
    this.addCommand({
      id: "backward-paragraph",
      name: "Backward paragraph",
      editorCallback: async (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          this.moveToNextParagraph(editor, 1 /* Backward */);
        });
      }
    });
  }
  onunload() {
    console.log("unloading plugin: Emacs text editor");
  }
  disableSelection(editor) {
    editor.setSelection(editor.getCursor(), editor.getCursor());
    this.pluginTriggerSelection = false;
    this.disableSelectionWhenPossible = false;
  }
  withSelectionUpdate(editor, callback) {
    if (this.disableSelectionWhenPossible) {
      this.disableSelection(editor);
    }
    const currentSelectionStart = this.getCurrentSelectionStart(editor);
    if (currentSelectionStart) {
      editor.setSelection(editor.getCursor());
    }
    callback();
    if (currentSelectionStart) {
      editor.setSelection(currentSelectionStart, editor.getCursor());
    }
  }
  getCurrentSelectionStart(editor) {
    const selections = editor.listSelections();
    if (selections.length == 0) {
      return void 0;
    }
    if (selections[0].anchor.line !== selections[0].head.line || selections[0].anchor.ch !== selections[0].head.ch) {
      return selections[0].anchor;
    }
    if (this.pluginTriggerSelection) {
      return selections[0].anchor;
    }
    return void 0;
  }
  withDeleteInText(editor, callback) {
    const cursorBefore = editor.getCursor();
    callback();
    const cursorAfter = editor.getCursor();
    editor.setSelection(cursorBefore, cursorAfter);
    this.putSelectionInClipboard(editor, 1 /* Cut */);
  }
  putSelectionInClipboard(editor, mode) {
    if (!this.getCurrentSelectionStart(editor)) {
      return;
    }
    navigator.clipboard.writeText(editor.getSelection());
    if (mode == 0 /* Copy */) {
      document.dispatchEvent(new ClipboardEvent("copy"));
    } else if (mode == 1 /* Cut */) {
      editor.replaceSelection("");
      document.dispatchEvent(new ClipboardEvent("cut"));
    }
    this.disableSelection(editor);
  }
  moveToNextParagraph(editor, direction) {
    const cursor = editor.getCursor();
    const value = editor.getValue();
    const maxOffset = value.length;
    const currentOffset = editor.posToOffset(cursor);
    if (direction === 0 /* Forward */ && currentOffset >= maxOffset || direction === 1 /* Backward */ && currentOffset === 0) {
      return;
    }
    let nextParagraphOffset = direction === 0 /* Forward */ ? maxOffset : 0;
    let foundText = false;
    let foundFirstBreak = false;
    function isNewLine(position, direction2) {
      if (direction2 === 0 /* Forward */) {
        return value[position] === "\n" || value[position] === "\r" && value[position + 1] === "\n";
      } else {
        return value[position] === "\n" || position > 0 && value[position - 1] === "\r" && value[position] === "\n";
      }
    }
    const step = direction === 0 /* Forward */ ? 1 : -1;
    let i = currentOffset;
    while (direction === 0 /* Forward */ && i < maxOffset || direction === 1 /* Backward */ && i > 0) {
      if (foundText && isNewLine(i, direction)) {
        if (foundFirstBreak) {
          nextParagraphOffset = direction === 0 /* Forward */ ? i : i + 1;
          if (direction === 0 /* Forward */ && value[i] === "\r" || direction === 1 /* Backward */ && i > 0 && value[i - 1] === "\r") {
            nextParagraphOffset += direction === 0 /* Forward */ ? 1 : -1;
          }
          break;
        } else {
          foundFirstBreak = true;
          i += step;
          continue;
        }
      } else {
        foundFirstBreak = false;
      }
      if (value[i] !== "\n" && value[i] !== "\r" && value[i] !== " ") {
        foundText = true;
      }
      i += step;
    }
    const newPos = editor.offsetToPos(nextParagraphOffset);
    editor.setCursor(newPos);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbiwgUGx1Z2luLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZW51bSBEaXJlY3Rpb24ge1xuXHRGb3J3YXJkLFxuXHRCYWNrd2FyZCxcbn1cblxuZW51bSBDb3B5Q3V0IHtcblx0Q29weSxcblx0Q3V0LFxufVxuXG5jb25zdCBpbnNlcnRhYmxlU3BlY2lhbEtleXMgPSBbXG5cdFwiQ29tbWFcIixcblx0XCJQZXJpb2RcIixcblx0XCJTbGFzaFwiLFxuXHRcIlNlbWljb2xvblwiLFxuXHRcIlF1b3RlXCIsXG5cdFwiQnJhY2tldExlZnRcIixcblx0XCJCcmFja2V0UmlnaHRcIixcblx0XCJCYWNrc2xhc2hcIixcblx0XCJCYWNrcXVvdGVcIixcblx0XCJNaW51c1wiLFxuXHRcIkVxdWFsXCIsXG5dO1xuXG5mdW5jdGlvbiBpc0V2ZW50SW50ZXJydXB0U2VsZWN0aW9uKGU6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcblx0cmV0dXJuIChcblx0XHRlLmNvZGUgPT0gXCJCYWNrc3BhY2VcIiB8fFxuXHRcdGUuY29kZSA9PSBcIkRlbGV0ZVwiIHx8XG5cdFx0Qm9vbGVhbihlLmNvZGUubWF0Y2goL15LZXlbQS1aXSQvKSkgfHxcblx0XHRCb29sZWFuKGUuY29kZS5tYXRjaCgvXkRpZ2l0WzAtOV0kLykpIHx8XG5cdFx0Qm9vbGVhbihlLmNvZGUubWF0Y2goL15OdW1wYWRbMC05XSQvKSkgfHxcblx0XHRpbnNlcnRhYmxlU3BlY2lhbEtleXMuaW5jbHVkZXMoZS5jb2RlKVxuXHQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWFjc1RleHRFZGl0b3JQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRwbHVnaW5UcmlnZ2VyU2VsZWN0aW9uID0gZmFsc2U7XG5cdGRpc2FibGVTZWxlY3Rpb25XaGVuUG9zc2libGUgPSBmYWxzZTtcblxuXHRvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJsb2FkaW5nIHBsdWdpbjogRW1hY3MgdGV4dCBlZGl0b3JcIik7XG5cblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGlzRXZlbnRJbnRlcnJ1cHRTZWxlY3Rpb24oZSkpIHtcblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uV2hlblBvc3NpYmxlID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5wbHVnaW5UcmlnZ2VyU2VsZWN0aW9uID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZm9yd2FyZC1jaGFyXCIsXG5cdFx0XHRuYW1lOiBcIkZvcndhcmQgY2hhclwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRlZGl0b3IuZXhlYyhcImdvUmlnaHRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJiYWNrd2FyZC1jaGFyXCIsXG5cdFx0XHRuYW1lOiBcIkJhY2t3YXJkIGNoYXJcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb0xlZnRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJuZXh0LWxpbmVcIixcblx0XHRcdG5hbWU6IFwiTmV4dCBsaW5lXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29Eb3duXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicHJldmlvdXMtbGluZVwiLFxuXHRcdFx0bmFtZTogXCJQcmV2aW91cyBsaW5lXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29VcFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImZvcndhcmQtd29yZFwiLFxuXHRcdFx0bmFtZTogXCJGb3J3YXJkIHdvcmRcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1dvcmRSaWdodFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJhY2t3YXJkLXdvcmRcIixcblx0XHRcdG5hbWU6IFwiQmFja3dhcmQgd29yZFwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRlZGl0b3IuZXhlYyhcImdvV29yZExlZnRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJtb3ZlLWVuZC1vZi1saW5lXCIsXG5cdFx0XHRuYW1lOiBcIk1vdmUgZW5kIG9mIGxpbmVcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdFx0XHRcdGNvbnN0IGxpbmVDb250ZW50ID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuXHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe1xuXHRcdFx0XHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdFx0XHRjaDogbGluZUNvbnRlbnQubGVuZ3RoLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwibW92ZS1iZWdpbm5pbmctb2YtbGluZVwiLFxuXHRcdFx0bmFtZTogXCJNb3ZlIGN1cnNvciB0byBiZWdpbm5pbmcgb2YgbGluZVwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogMCB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnbW92ZS1iZWdpbm5pbmctb2YtbGluZS1saWtlLWhvbWVrZXknLFxuXHRcdFx0bmFtZTogJ01vdmUgY3Vyc29yIGFmdGVyIGhlYWRpbmcgbWFya2Rvd24gb2YgYmVnaW5uaW5nIG9mIGxpbmUgKGxpa2UgYSBIT01FIGtleSknLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdFx0XHRpZiAoY3Vyc29yLmNoID09IDApIHJldHVybjtcblxuXHRcdFx0XHRcdGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSlcblx0XHRcdFx0XHRsZXQgcmVzdWx0ID0gbGluZS5tYXRjaCgvXiN7MSw2fVxccy8pXG5cdFx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gbGluZS5tYXRjaCgvXlxccypcXGQrXFwuXFxzLylcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gbGluZS5tYXRjaCgvXlxccyooLVxccyhcXFsuXFxdXFxzKT8pPy8pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0WzBdLmxlbmd0aCA8IGN1cnNvci5jaCkge1xuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogcmVzdWx0WzBdLmxlbmd0aCB9KVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiAwIH0pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYmVnaW5uaW5nLW9mLWJ1ZmZlcicsXG5cdFx0XHRuYW1lOiAnQmVnaW5uaW5nIG9mIGJ1ZmZlcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29TdGFydFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImVuZC1vZi1idWZmZXJcIixcblx0XHRcdG5hbWU6IFwiRW5kIG9mIGJ1ZmZlclwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRlZGl0b3IuZXhlYyhcImdvRW5kXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwia2lsbC1saW5lXCIsXG5cdFx0XHRuYW1lOiBcIktpbGwgbGluZVwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMuZGlzYWJsZVNlbGVjdGlvbihlZGl0b3IpO1xuXG5cdFx0XHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblx0XHRcdFx0Y29uc3QgbGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG5cdFx0XHRcdGlmIChsaW5lQ29udGVudCA9PT0gXCJcIikge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZGVsZXRlTGluZVwiKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGN1cnNvciwge1xuXHRcdFx0XHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdFx0XHRjaDogbGluZUNvbnRlbnQubGVuZ3RoLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHRoaXMucHV0U2VsZWN0aW9uSW5DbGlwYm9hcmQoZWRpdG9yLCBDb3B5Q3V0LkN1dCk7XG5cdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImRlbGV0ZS1jaGFyXCIsXG5cdFx0XHRuYW1lOiBcIkRlbGV0ZSBjaGFyXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcik7XG5cblx0XHRcdFx0dGhpcy53aXRoRGVsZXRlSW5UZXh0KGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29SaWdodFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImtpbGwtd29yZFwiLFxuXHRcdFx0bmFtZTogXCJLaWxsIHdvcmRcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhEZWxldGVJblRleHQoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1dvcmRSaWdodFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJhY2t3YXJkLWtpbGwtd29yZFwiLFxuXHRcdFx0bmFtZTogXCJCYWNrd2FyZCBraWxsIHdvcmRcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhEZWxldGVJblRleHQoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1dvcmRMZWZ0XCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwia2lsbC1yaW5nLXNhdmVcIixcblx0XHRcdG5hbWU6IFwiS2lsbCByaW5nIHNhdmVcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLnB1dFNlbGVjdGlvbkluQ2xpcGJvYXJkKGVkaXRvciwgQ29weUN1dC5Db3B5KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwia2lsbC1yZWdpb25cIixcblx0XHRcdG5hbWU6IFwiS2lsbCByZWdpb25cIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLnB1dFNlbGVjdGlvbkluQ2xpcGJvYXJkKGVkaXRvciwgQ29weUN1dC5DdXQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJ5YW5rXCIsXG5cdFx0XHRuYW1lOiBcIllhbmtcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRjb25zdCBjbGlwYm9hcmRDb250ZW50ID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpO1xuXHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cblx0XHRcdFx0aWYgKCF0aGlzLmdldEN1cnJlbnRTZWxlY3Rpb25TdGFydChlZGl0b3IpKSB7XG5cdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShjbGlwYm9hcmRDb250ZW50LCBjdXJzb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGNsaXBib2FyZENvbnRlbnQpO1xuXHRcdFx0XHRcdHRoaXMuZGlzYWJsZVNlbGVjdGlvbihlZGl0b3IpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihcblx0XHRcdFx0XHRjdXJzb3IubGluZSxcblx0XHRcdFx0XHRjdXJzb3IuY2ggKyBjbGlwYm9hcmRDb250ZW50Lmxlbmd0aCxcblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ2xpcGJvYXJkRXZlbnQoXCJwYXN0ZVwiKSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInNldC1tYXJrLWNvbW1hbmRcIixcblx0XHRcdG5hbWU6IFwiU2V0IG1hcmsgY29tbWFuZFwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpblRyaWdnZXJTZWxlY3Rpb24pIHtcblx0XHRcdFx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb24oZWRpdG9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpblRyaWdnZXJTZWxlY3Rpb24gPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZGlzYWJsZVNlbGVjdGlvbldoZW5Qb3NzaWJsZSA9IGZhbHNlO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJrZXlib2FyZC1xdWl0XCIsXG5cdFx0XHRuYW1lOiBcIktleWJvYXJkLXF1aXRcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb24oZWRpdG9yKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwidW5kb1wiLFxuXHRcdFx0bmFtZTogXCJVbmRvXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0ZWRpdG9yLnVuZG8oKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicmVkb1wiLFxuXHRcdFx0bmFtZTogXCJSZWRvXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0ZWRpdG9yLnJlZG8oKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicmVjZW50ZXItdG9wLWJvdHRvbVwiLFxuXHRcdFx0bmFtZTogXCJSZWNlbnRlclwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblx0XHRcdFx0Y29uc3QgcmFuZ2UgPSB7XG5cdFx0XHRcdFx0ZnJvbTogeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGN1cnNvci5jaCB9LFxuXHRcdFx0XHRcdHRvOiB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogY3Vyc29yLmNoIH0sXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVkaXRvci5zY3JvbGxJbnRvVmlldyhyYW5nZSwgdHJ1ZSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImZvcndhcmQtcGFyYWdyYXBoXCIsXG5cdFx0XHRuYW1lOiBcIkZvcndhcmQgcGFyYWdyYXBoXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMubW92ZVRvTmV4dFBhcmFncmFwaChlZGl0b3IsIERpcmVjdGlvbi5Gb3J3YXJkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJhY2t3YXJkLXBhcmFncmFwaFwiLFxuXHRcdFx0bmFtZTogXCJCYWNrd2FyZCBwYXJhZ3JhcGhcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5tb3ZlVG9OZXh0UGFyYWdyYXBoKGVkaXRvciwgRGlyZWN0aW9uLkJhY2t3YXJkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJ1bmxvYWRpbmcgcGx1Z2luOiBFbWFjcyB0ZXh0IGVkaXRvclwiKTtcblx0fVxuXG5cdGRpc2FibGVTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpIHtcblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGVkaXRvci5nZXRDdXJzb3IoKSwgZWRpdG9yLmdldEN1cnNvcigpKTtcblx0XHR0aGlzLnBsdWdpblRyaWdnZXJTZWxlY3Rpb24gPSBmYWxzZTtcblx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb25XaGVuUG9zc2libGUgPSBmYWxzZTtcblx0fVxuXG5cdHdpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yOiBFZGl0b3IsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG5cdFx0aWYgKHRoaXMuZGlzYWJsZVNlbGVjdGlvbldoZW5Qb3NzaWJsZSkge1xuXHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VycmVudFNlbGVjdGlvblN0YXJ0ID0gdGhpcy5nZXRDdXJyZW50U2VsZWN0aW9uU3RhcnQoZWRpdG9yKTtcblx0XHRpZiAoY3VycmVudFNlbGVjdGlvblN0YXJ0KSB7XG5cdFx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGVkaXRvci5nZXRDdXJzb3IoKSk7XG5cdFx0fVxuXG5cdFx0Y2FsbGJhY2soKTtcblxuXHRcdGlmIChjdXJyZW50U2VsZWN0aW9uU3RhcnQpIHtcblx0XHRcdGVkaXRvci5zZXRTZWxlY3Rpb24oY3VycmVudFNlbGVjdGlvblN0YXJ0LCBlZGl0b3IuZ2V0Q3Vyc29yKCkpO1xuXHRcdH1cblx0fVxuXG5cdGdldEN1cnJlbnRTZWxlY3Rpb25TdGFydChlZGl0b3I6IEVkaXRvcik6IEVkaXRvclBvc2l0aW9uIHwgdW5kZWZpbmVkIHtcblx0XHRjb25zdCBzZWxlY3Rpb25zID0gZWRpdG9yLmxpc3RTZWxlY3Rpb25zKCk7XG5cblx0XHRpZiAoc2VsZWN0aW9ucy5sZW5ndGggPT0gMCkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRpZiAoXG5cdFx0XHRzZWxlY3Rpb25zWzBdLmFuY2hvci5saW5lICE9PSBzZWxlY3Rpb25zWzBdLmhlYWQubGluZSB8fFxuXHRcdFx0c2VsZWN0aW9uc1swXS5hbmNob3IuY2ggIT09IHNlbGVjdGlvbnNbMF0uaGVhZC5jaFxuXHRcdCkge1xuXHRcdFx0cmV0dXJuIHNlbGVjdGlvbnNbMF0uYW5jaG9yO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnBsdWdpblRyaWdnZXJTZWxlY3Rpb24pIHtcblx0XHRcdHJldHVybiBzZWxlY3Rpb25zWzBdLmFuY2hvcjtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0d2l0aERlbGV0ZUluVGV4dChlZGl0b3I6IEVkaXRvciwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcblx0XHRjb25zdCBjdXJzb3JCZWZvcmUgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cblx0XHRjYWxsYmFjaygpO1xuXG5cdFx0Y29uc3QgY3Vyc29yQWZ0ZXIgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGN1cnNvckJlZm9yZSwgY3Vyc29yQWZ0ZXIpO1xuXG5cdFx0dGhpcy5wdXRTZWxlY3Rpb25JbkNsaXBib2FyZChlZGl0b3IsIENvcHlDdXQuQ3V0KTtcblx0fVxuXG5cdHB1dFNlbGVjdGlvbkluQ2xpcGJvYXJkKGVkaXRvcjogRWRpdG9yLCBtb2RlOiBDb3B5Q3V0KSB7XG5cdFx0aWYgKCF0aGlzLmdldEN1cnJlbnRTZWxlY3Rpb25TdGFydChlZGl0b3IpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZWRpdG9yLmdldFNlbGVjdGlvbigpKTtcblxuXHRcdGlmIChtb2RlID09IENvcHlDdXQuQ29weSkge1xuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ2xpcGJvYXJkRXZlbnQoXCJjb3B5XCIpKTtcblx0XHR9IGVsc2UgaWYgKG1vZGUgPT0gQ29weUN1dC5DdXQpIHtcblx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFwiXCIpO1xuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ2xpcGJvYXJkRXZlbnQoXCJjdXRcIikpO1xuXHRcdH1cblxuXHRcdHRoaXMuZGlzYWJsZVNlbGVjdGlvbihlZGl0b3IpO1xuXHR9XG5cblx0bW92ZVRvTmV4dFBhcmFncmFwaChlZGl0b3I6IEVkaXRvciwgZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0Y29uc3QgdmFsdWUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRjb25zdCBtYXhPZmZzZXQgPSB2YWx1ZS5sZW5ndGg7XG5cdFx0Y29uc3QgY3VycmVudE9mZnNldCA9IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpO1xuXG5cdFx0aWYgKFxuXHRcdFx0KGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQgJiYgY3VycmVudE9mZnNldCA+PSBtYXhPZmZzZXQpIHx8XG5cdFx0XHQoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQmFja3dhcmQgJiYgY3VycmVudE9mZnNldCA9PT0gMClcblx0XHQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsZXQgbmV4dFBhcmFncmFwaE9mZnNldCA9XG5cdFx0XHRkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Gb3J3YXJkID8gbWF4T2Zmc2V0IDogMDtcblx0XHRsZXQgZm91bmRUZXh0ID0gZmFsc2U7XG5cdFx0bGV0IGZvdW5kRmlyc3RCcmVhayA9IGZhbHNlO1xuXG5cdFx0ZnVuY3Rpb24gaXNOZXdMaW5lKHBvc2l0aW9uOiBudW1iZXIsIGRpcmVjdGlvbjogRGlyZWN0aW9uKTogYm9vbGVhbiB7XG5cdFx0XHRpZiAoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRm9yd2FyZCkge1xuXHRcdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRcdHZhbHVlW3Bvc2l0aW9uXSA9PT0gXCJcXG5cIiB8fFxuXHRcdFx0XHRcdCh2YWx1ZVtwb3NpdGlvbl0gPT09IFwiXFxyXCIgJiYgdmFsdWVbcG9zaXRpb24gKyAxXSA9PT0gXCJcXG5cIilcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0dmFsdWVbcG9zaXRpb25dID09PSBcIlxcblwiIHx8XG5cdFx0XHRcdFx0KHBvc2l0aW9uID4gMCAmJlxuXHRcdFx0XHRcdFx0dmFsdWVbcG9zaXRpb24gLSAxXSA9PT0gXCJcXHJcIiAmJlxuXHRcdFx0XHRcdFx0dmFsdWVbcG9zaXRpb25dID09PSBcIlxcblwiKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHN0ZXAgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Gb3J3YXJkID8gMSA6IC0xO1xuXHRcdGxldCBpID0gY3VycmVudE9mZnNldDtcblxuXHRcdHdoaWxlIChcblx0XHRcdChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Gb3J3YXJkICYmIGkgPCBtYXhPZmZzZXQpIHx8XG5cdFx0XHQoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQmFja3dhcmQgJiYgaSA+IDApXG5cdFx0KSB7XG5cdFx0XHRpZiAoZm91bmRUZXh0ICYmIGlzTmV3TGluZShpLCBkaXJlY3Rpb24pKSB7XG5cdFx0XHRcdGlmIChmb3VuZEZpcnN0QnJlYWspIHtcblx0XHRcdFx0XHRuZXh0UGFyYWdyYXBoT2Zmc2V0ID1cblx0XHRcdFx0XHRcdGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQgPyBpIDogaSArIDE7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0KGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQgJiZcblx0XHRcdFx0XHRcdFx0dmFsdWVbaV0gPT09IFwiXFxyXCIpIHx8XG5cdFx0XHRcdFx0XHQoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQmFja3dhcmQgJiZcblx0XHRcdFx0XHRcdFx0aSA+IDAgJiZcblx0XHRcdFx0XHRcdFx0dmFsdWVbaSAtIDFdID09PSBcIlxcclwiKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0bmV4dFBhcmFncmFwaE9mZnNldCArPVxuXHRcdFx0XHRcdFx0XHRkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Gb3J3YXJkID8gMSA6IC0xO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmb3VuZEZpcnN0QnJlYWsgPSB0cnVlO1xuXHRcdFx0XHRcdGkgKz0gc3RlcDtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm91bmRGaXJzdEJyZWFrID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh2YWx1ZVtpXSAhPT0gXCJcXG5cIiAmJiB2YWx1ZVtpXSAhPT0gXCJcXHJcIiAmJiB2YWx1ZVtpXSAhPT0gXCIgXCIpIHtcblx0XHRcdFx0Zm91bmRUZXh0ID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aSArPSBzdGVwO1xuXHRcdH1cblxuXHRcdGNvbnN0IG5ld1BvcyA9IGVkaXRvci5vZmZzZXRUb1BvcyhuZXh0UGFyYWdyYXBoT2Zmc2V0KTtcblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKG5ld1Bvcyk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBNkQ7QUFZN0QsSUFBTSx3QkFBd0I7QUFBQSxFQUM3QjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRDtBQUVBLFNBQVMsMEJBQTBCLEdBQTJCO0FBQzdELFNBQ0MsRUFBRSxRQUFRLGVBQ1YsRUFBRSxRQUFRLFlBQ1YsUUFBUSxFQUFFLEtBQUssTUFBTSxZQUFZLENBQUMsS0FDbEMsUUFBUSxFQUFFLEtBQUssTUFBTSxjQUFjLENBQUMsS0FDcEMsUUFBUSxFQUFFLEtBQUssTUFBTSxlQUFlLENBQUMsS0FDckMsc0JBQXNCLFNBQVMsRUFBRSxJQUFJO0FBRXZDO0FBRUEsSUFBcUIsd0JBQXJCLGNBQW1ELHVCQUFPO0FBQUEsRUFBMUQ7QUFBQTtBQUNDLGtD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
