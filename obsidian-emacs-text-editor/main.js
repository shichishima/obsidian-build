/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => EmacsTextEditorPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var EmacsTextEditorPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.pluginTriggerSelection = false;
  }
  onload() {
    console.log("loading plugin: Emacs text editor");
    this.addCommand({
      id: "forward-char",
      name: "Forward char",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goRight");
        });
      }
    });
    this.addCommand({
      id: "backward-char",
      name: "Backward char",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goLeft");
        });
      }
    });
    this.addCommand({
      id: "next-line",
      name: "Next line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goDown");
        });
      }
    });
    this.addCommand({
      id: "previous-line",
      name: "Previous line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goUp");
        });
      }
    });
    this.addCommand({
      id: "forward-word",
      name: "Forward word",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goWordRight");
        });
      }
    });
    this.addCommand({
      id: "backward-word",
      name: "Backward word",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goWordLeft");
        });
      }
    });
    this.addCommand({
      id: "move-end-of-line",
      name: "Move end of line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          const lineContent = editor.getLine(cursor.line);
          editor.setCursor({ line: cursor.line, ch: lineContent.length });
        });
      }
    });
    this.addCommand({
      id: "move-beginning-of-line",
      name: "Move cursor to beginning of line",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          editor.setCursor({ line: cursor.line, ch: 0 });
        });
      }
    });
    this.addCommand({
      id: "move-beginning-of-line-like-homekey",
      name: "Move cursor to beginning of line (like a HOME key)",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          const cursor = editor.getCursor();
          if (cursor.ch == 0)
            return;
          const line = editor.getLine(cursor.line);
          let result = line.match(/^#{1,6}\s/);
          if (result === null) {
            result = line.match(/^\s*(-\s(\[.\]\s)?)?/);
          }
          if (result !== null && result[0].length < cursor.ch) {
            editor.setCursor({ line: cursor.line, ch: result[0].length });
          } else {
            editor.setCursor({ line: cursor.line, ch: 0 });
          }
        });
      }
    });
    this.addCommand({
      id: "beginning-of-buffer",
      name: "Beginning of buffer",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goStart");
        });
      }
    });
    this.addCommand({
      id: "end-of-buffer",
      name: "End of buffer",
      editorCallback: (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          editor.exec("goEnd");
        });
      }
    });
    this.addCommand({
      id: "kill-line",
      name: "Kill line",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        const cursor = editor.getCursor();
        const lineContent = editor.getLine(cursor.line);
        if (lineContent === "") {
          editor.exec("deleteLine");
        } else {
          editor.setLine(cursor.line, lineContent.substring(0, cursor.ch));
          editor.setCursor(cursor);
        }
      }
    });
    this.addCommand({
      id: "delete-char",
      name: "Delete char",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        this.withDeleteInText(editor, () => {
          editor.exec("goRight");
        });
      }
    });
    this.addCommand({
      id: "kill-word",
      name: "Kill word",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        this.withDeleteInText(editor, () => {
          editor.exec("goWordRight");
        });
      }
    });
    this.addCommand({
      id: "backward-kill-word",
      name: "Backward kill word",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
        this.withDeleteInText(editor, () => {
          editor.exec("goWordLeft");
        });
      }
    });
    this.addCommand({
      id: "kill-ring-save",
      name: "Kill ring save",
      editorCallback: (editor, _) => {
        if (!this.getCurrentSelectionStart(editor)) {
          return;
        }
        navigator.clipboard.writeText(editor.getSelection());
        document.dispatchEvent(new ClipboardEvent("copy"));
        this.disableSelection(editor);
      }
    });
    this.addCommand({
      id: "kill-region",
      name: "Kill region",
      editorCallback: (editor, _) => {
        if (!this.getCurrentSelectionStart(editor)) {
          return;
        }
        navigator.clipboard.writeText(editor.getSelection());
        editor.replaceSelection("");
        document.dispatchEvent(new ClipboardEvent("cut"));
        this.disableSelection(editor);
      }
    });
    this.addCommand({
      id: "yank",
      name: "Yank",
      editorCallback: async (editor, _) => {
        const clipboardContent = await navigator.clipboard.readText();
        const cursor = editor.getCursor();
        if (!this.getCurrentSelectionStart(editor)) {
          editor.replaceRange(clipboardContent, cursor);
        } else {
          editor.replaceSelection(clipboardContent);
          this.disableSelection(editor);
        }
        editor.setCursor(cursor.line, cursor.ch + clipboardContent.length);
        document.dispatchEvent(new ClipboardEvent("paste"));
      }
    });
    this.addCommand({
      id: "set-mark-command",
      name: "Set mark command",
      editorCallback: (editor, _) => {
        if (this.pluginTriggerSelection) {
          this.disableSelection(editor);
        } else {
          this.pluginTriggerSelection = true;
        }
      }
    });
    this.addCommand({
      id: "keyboard-quit",
      name: "Keyboard-quit",
      editorCallback: (editor, _) => {
        this.disableSelection(editor);
      }
    });
    this.addCommand({
      id: "undo",
      name: "Undo",
      editorCallback: (editor, _) => {
        editor.undo();
      }
    });
    this.addCommand({
      id: "redo",
      name: "Redo",
      editorCallback: (editor, _) => {
        editor.redo();
      }
    });
    this.addCommand({
      id: "recenter-top-bottom",
      name: "Recenter",
      editorCallback: (editor, _) => {
        const cursor = editor.getCursor();
        const range = {
          from: { line: cursor.line, ch: cursor.ch },
          to: { line: cursor.line, ch: cursor.ch }
        };
        editor.scrollIntoView(range, true);
      }
    });
    this.addCommand({
      id: "forward-paragraph",
      name: "Forward paragraph",
      editorCallback: async (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          this.moveToNextParagraph(editor, 0 /* Forward */);
        });
      }
    });
    this.addCommand({
      id: "backward-paragraph",
      name: "Backward paragraph",
      editorCallback: async (editor, _) => {
        this.withSelectionUpdate(editor, () => {
          this.moveToNextParagraph(editor, 1 /* Backward */);
        });
      }
    });
  }
  onunload() {
    console.log("unloading plugin: Emacs text editor");
  }
  disableSelection(editor) {
    editor.setSelection(editor.getCursor(), editor.getCursor());
    this.pluginTriggerSelection = false;
  }
  withSelectionUpdate(editor, callback) {
    const currentSelectionStart = this.getCurrentSelectionStart(editor);
    if (currentSelectionStart) {
      editor.setSelection(editor.getCursor());
    }
    callback();
    if (currentSelectionStart) {
      editor.setSelection(currentSelectionStart, editor.getCursor());
    }
  }
  getCurrentSelectionStart(editor) {
    const selections = editor.listSelections();
    if (selections.length == 0) {
      return void 0;
    }
    if (selections[0].anchor.line !== selections[0].head.line || selections[0].anchor.ch !== selections[0].head.ch) {
      return selections[0].anchor;
    }
    if (this.pluginTriggerSelection) {
      return selections[0].anchor;
    }
    return void 0;
  }
  withDeleteInText(editor, callback) {
    const cursorBefore = editor.getCursor();
    callback();
    const cursorAfter = editor.getCursor();
    editor.setSelection(cursorBefore, cursorAfter);
    editor.replaceSelection("");
  }
  moveToNextParagraph(editor, direction) {
    const cursor = editor.getCursor();
    const value = editor.getValue();
    const maxOffset = value.length;
    const currentOffset = editor.posToOffset(cursor);
    if (direction === 0 /* Forward */ && currentOffset >= maxOffset || direction === 1 /* Backward */ && currentOffset === 0) {
      return;
    }
    let nextParagraphOffset = direction === 0 /* Forward */ ? maxOffset : 0;
    let foundText = false;
    let foundFirstBreak = false;
    function isNewLine(position, direction2) {
      if (direction2 === 0 /* Forward */) {
        return value[position] === "\n" || value[position] === "\r" && value[position + 1] === "\n";
      } else {
        return value[position] === "\n" || position > 0 && value[position - 1] === "\r" && value[position] === "\n";
      }
    }
    const step = direction === 0 /* Forward */ ? 1 : -1;
    let i = currentOffset;
    while (direction === 0 /* Forward */ && i < maxOffset || direction === 1 /* Backward */ && i > 0) {
      if (foundText && isNewLine(i, direction)) {
        if (foundFirstBreak) {
          nextParagraphOffset = direction === 0 /* Forward */ ? i : i + 1;
          if (direction === 0 /* Forward */ && value[i] === "\r" || direction === 1 /* Backward */ && i > 0 && value[i - 1] === "\r") {
            nextParagraphOffset += direction === 0 /* Forward */ ? 1 : -1;
          }
          break;
        } else {
          foundFirstBreak = true;
          i += step;
          continue;
        }
      } else {
        foundFirstBreak = false;
      }
      if (value[i] !== "\n" && value[i] !== "\r" && value[i] !== " ") {
        foundText = true;
      }
      i += step;
    }
    const newPos = editor.offsetToPos(nextParagraphOffset);
    editor.setCursor(newPos);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbiwgUGx1Z2luLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZW51bSBEaXJlY3Rpb24ge1xuXHRGb3J3YXJkLFxuXHRCYWNrd2FyZFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWFjc1RleHRFZGl0b3JQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXG5cdHBsdWdpblRyaWdnZXJTZWxlY3Rpb24gPSBmYWxzZVxuXG5cdG9ubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZygnbG9hZGluZyBwbHVnaW46IEVtYWNzIHRleHQgZWRpdG9yJyk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdmb3J3YXJkLWNoYXInLFxuXHRcdFx0bmFtZTogJ0ZvcndhcmQgY2hhcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29SaWdodFwiKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYmFja3dhcmQtY2hhcicsXG5cdFx0XHRuYW1lOiAnQmFja3dhcmQgY2hhcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29MZWZ0XCIpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICduZXh0LWxpbmUnLFxuXHRcdFx0bmFtZTogJ05leHQgbGluZScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29Eb3duXCIpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdwcmV2aW91cy1saW5lJyxcblx0XHRcdG5hbWU6ICdQcmV2aW91cyBsaW5lJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1VwXCIpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdmb3J3YXJkLXdvcmQnLFxuXHRcdFx0bmFtZTogJ0ZvcndhcmQgd29yZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29Xb3JkUmlnaHRcIilcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2JhY2t3YXJkLXdvcmQnLFxuXHRcdFx0bmFtZTogJ0JhY2t3YXJkIHdvcmQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRlZGl0b3IuZXhlYyhcImdvV29yZExlZnRcIilcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ21vdmUtZW5kLW9mLWxpbmUnLFxuXHRcdFx0bmFtZTogJ01vdmUgZW5kIG9mIGxpbmUnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdFx0XHRjb25zdCBsaW5lQ29udGVudCA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKVxuXHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGxpbmVDb250ZW50Lmxlbmd0aCB9KVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnbW92ZS1iZWdpbm5pbmctb2YtbGluZScsXG5cdFx0XHRuYW1lOiAnTW92ZSBjdXJzb3IgdG8gYmVnaW5uaW5nIG9mIGxpbmUnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiAwIH0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdtb3ZlLWJlZ2lubmluZy1vZi1saW5lLWxpa2UtaG9tZWtleScsXG5cdFx0XHRuYW1lOiAnTW92ZSBjdXJzb3IgdG8gYmVnaW5uaW5nIG9mIGxpbmUgKGxpa2UgYSBIT01FIGtleSknLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdFx0XHRpZiAoY3Vyc29yLmNoID09IDApIHJldHVybjtcblxuXHRcdFx0XHRcdGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSlcblx0XHRcdFx0XHRsZXQgcmVzdWx0ID0gbGluZS5tYXRjaCgvXiN7MSw2fVxccy8pXG5cdFx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gbGluZS5tYXRjaCgvXlxccyooLVxccyhcXFsuXFxdXFxzKT8pPy8pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0WzBdLmxlbmd0aCA8IGN1cnNvci5jaCkge1xuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogcmVzdWx0WzBdLmxlbmd0aCB9KVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiAwIH0pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYmVnaW5uaW5nLW9mLWJ1ZmZlcicsXG5cdFx0XHRuYW1lOiAnQmVnaW5uaW5nIG9mIGJ1ZmZlcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29TdGFydFwiKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZW5kLW9mLWJ1ZmZlcicsXG5cdFx0XHRuYW1lOiAnRW5kIG9mIGJ1ZmZlcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy53aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29FbmRcIilcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2tpbGwtbGluZScsXG5cdFx0XHRuYW1lOiAnS2lsbCBsaW5lJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb24oZWRpdG9yKVxuXG5cdFx0XHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKVxuXHRcdFx0XHRjb25zdCBsaW5lQ29udGVudCA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKVxuXHRcdFx0XHRpZiAobGluZUNvbnRlbnQgPT09IFwiXCIpIHtcblx0XHRcdFx0XHRlZGl0b3IuZXhlYyhcImRlbGV0ZUxpbmVcIilcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlZGl0b3Iuc2V0TGluZShjdXJzb3IubGluZSwgbGluZUNvbnRlbnQuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCkpXG5cdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2RlbGV0ZS1jaGFyJyxcblx0XHRcdG5hbWU6ICdEZWxldGUgY2hhcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcilcblxuXHRcdFx0XHR0aGlzLndpdGhEZWxldGVJblRleHQoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1JpZ2h0XCIpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdraWxsLXdvcmQnLFxuXHRcdFx0bmFtZTogJ0tpbGwgd29yZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcilcblxuXHRcdFx0XHR0aGlzLndpdGhEZWxldGVJblRleHQoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZWRpdG9yLmV4ZWMoXCJnb1dvcmRSaWdodFwiKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYmFja3dhcmQta2lsbC13b3JkJyxcblx0XHRcdG5hbWU6ICdCYWNrd2FyZCBraWxsIHdvcmQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMuZGlzYWJsZVNlbGVjdGlvbihlZGl0b3IpXG5cblx0XHRcdFx0dGhpcy53aXRoRGVsZXRlSW5UZXh0KGVkaXRvciwgKCkgPT4ge1xuXHRcdFx0XHRcdGVkaXRvci5leGVjKFwiZ29Xb3JkTGVmdFwiKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAna2lsbC1yaW5nLXNhdmUnLFxuXHRcdFx0bmFtZTogJ0tpbGwgcmluZyBzYXZlJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuZ2V0Q3VycmVudFNlbGVjdGlvblN0YXJ0KGVkaXRvcikpIHtcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGVkaXRvci5nZXRTZWxlY3Rpb24oKSlcblx0XHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ2xpcGJvYXJkRXZlbnQoJ2NvcHknKSk7XG5cblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcilcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2tpbGwtcmVnaW9uJyxcblx0XHRcdG5hbWU6ICdLaWxsIHJlZ2lvbicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0aWYgKCF0aGlzLmdldEN1cnJlbnRTZWxlY3Rpb25TdGFydChlZGl0b3IpKSB7XG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFwiXCIpXG5cdFx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IENsaXBib2FyZEV2ZW50KCdjdXQnKSk7XG5cblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcilcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3lhbmsnLFxuXHRcdFx0bmFtZTogJ1lhbmsnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNsaXBib2FyZENvbnRlbnQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KClcblx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpXG5cblx0XHRcdFx0aWYgKCF0aGlzLmdldEN1cnJlbnRTZWxlY3Rpb25TdGFydChlZGl0b3IpKSB7XG5cdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShjbGlwYm9hcmRDb250ZW50LCBjdXJzb3IpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oY2xpcGJvYXJkQ29udGVudClcblx0XHRcdFx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb24oZWRpdG9yKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihjdXJzb3IubGluZSwgY3Vyc29yLmNoICsgY2xpcGJvYXJkQ29udGVudC5sZW5ndGgpXG5cdFx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IENsaXBib2FyZEV2ZW50KCdwYXN0ZScpKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3NldC1tYXJrLWNvbW1hbmQnLFxuXHRcdFx0bmFtZTogJ1NldCBtYXJrIGNvbW1hbmQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpblRyaWdnZXJTZWxlY3Rpb24pIHtcblx0XHRcdFx0XHR0aGlzLmRpc2FibGVTZWxlY3Rpb24oZWRpdG9yKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luVHJpZ2dlclNlbGVjdGlvbiA9IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAna2V5Ym9hcmQtcXVpdCcsXG5cdFx0XHRuYW1lOiAnS2V5Ym9hcmQtcXVpdCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy5kaXNhYmxlU2VsZWN0aW9uKGVkaXRvcilcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3VuZG8nLFxuXHRcdFx0bmFtZTogJ1VuZG8nLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGVkaXRvci51bmRvKClcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3JlZG8nLFxuXHRcdFx0bmFtZTogJ1JlZG8nLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGVkaXRvci5yZWRvKClcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3JlY2VudGVyLXRvcC1ib3R0b20nLFxuXHRcdFx0bmFtZTogJ1JlY2VudGVyJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdFx0Y29uc3QgcmFuZ2UgPSB7XG5cdFx0XHRcdFx0ZnJvbTogeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGN1cnNvci5jaCB9LFxuXHRcdFx0XHRcdHRvOiB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogY3Vyc29yLmNoIH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcocmFuZ2UsIHRydWUpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdmb3J3YXJkLXBhcmFncmFwaCcsXG5cdFx0XHRuYW1lOiAnRm9yd2FyZCBwYXJhZ3JhcGgnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgXzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMud2l0aFNlbGVjdGlvblVwZGF0ZShlZGl0b3IsICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLm1vdmVUb05leHRQYXJhZ3JhcGgoZWRpdG9yLCBEaXJlY3Rpb24uRm9yd2FyZClcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2JhY2t3YXJkLXBhcmFncmFwaCcsXG5cdFx0XHRuYW1lOiAnQmFja3dhcmQgcGFyYWdyYXBoJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIF86IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLndpdGhTZWxlY3Rpb25VcGRhdGUoZWRpdG9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5tb3ZlVG9OZXh0UGFyYWdyYXBoKGVkaXRvciwgRGlyZWN0aW9uLkJhY2t3YXJkKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZygndW5sb2FkaW5nIHBsdWdpbjogRW1hY3MgdGV4dCBlZGl0b3InKTtcblx0fVxuXG5cdGRpc2FibGVTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpIHtcblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGVkaXRvci5nZXRDdXJzb3IoKSwgZWRpdG9yLmdldEN1cnNvcigpKVxuXHRcdHRoaXMucGx1Z2luVHJpZ2dlclNlbGVjdGlvbiA9IGZhbHNlXG5cdH1cblxuXHR3aXRoU2VsZWN0aW9uVXBkYXRlKGVkaXRvcjogRWRpdG9yLCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xuXHRcdGNvbnN0IGN1cnJlbnRTZWxlY3Rpb25TdGFydCA9IHRoaXMuZ2V0Q3VycmVudFNlbGVjdGlvblN0YXJ0KGVkaXRvcik7XG5cdFx0aWYgKGN1cnJlbnRTZWxlY3Rpb25TdGFydCkge1xuXHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbihlZGl0b3IuZ2V0Q3Vyc29yKCkpXG5cdFx0fVxuXG5cdFx0Y2FsbGJhY2soKVxuXG5cdFx0aWYgKGN1cnJlbnRTZWxlY3Rpb25TdGFydCkge1xuXHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbihjdXJyZW50U2VsZWN0aW9uU3RhcnQsIGVkaXRvci5nZXRDdXJzb3IoKSlcblx0XHR9XG5cdH1cblxuXHRnZXRDdXJyZW50U2VsZWN0aW9uU3RhcnQoZWRpdG9yOiBFZGl0b3IpOiBFZGl0b3JQb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3Qgc2VsZWN0aW9ucyA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpXG5cblx0XHRpZiAoc2VsZWN0aW9ucy5sZW5ndGggPT0gMCkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZFxuXHRcdH1cblxuXHRcdGlmIChzZWxlY3Rpb25zWzBdLmFuY2hvci5saW5lICE9PSBzZWxlY3Rpb25zWzBdLmhlYWQubGluZSB8fFxuXHRcdFx0c2VsZWN0aW9uc1swXS5hbmNob3IuY2ggIT09IHNlbGVjdGlvbnNbMF0uaGVhZC5jaCkge1xuXHRcdFx0cmV0dXJuIHNlbGVjdGlvbnNbMF0uYW5jaG9yXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucGx1Z2luVHJpZ2dlclNlbGVjdGlvbikge1xuXHRcdFx0cmV0dXJuIHNlbGVjdGlvbnNbMF0uYW5jaG9yXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVuZGVmaW5lZFxuXHR9XG5cblx0d2l0aERlbGV0ZUluVGV4dChlZGl0b3I6IEVkaXRvciwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcblx0XHRjb25zdCBjdXJzb3JCZWZvcmUgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblxuXHRcdGNhbGxiYWNrKClcblxuXHRcdGNvbnN0IGN1cnNvckFmdGVyID0gZWRpdG9yLmdldEN1cnNvcigpXG5cblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGN1cnNvckJlZm9yZSwgY3Vyc29yQWZ0ZXIpXG5cdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oXCJcIilcblx0fVxuXG5cdG1vdmVUb05leHRQYXJhZ3JhcGgoZWRpdG9yOiBFZGl0b3IsIGRpcmVjdGlvbjogRGlyZWN0aW9uKSB7XG5cdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdGNvbnN0IHZhbHVlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0Y29uc3QgbWF4T2Zmc2V0ID0gdmFsdWUubGVuZ3RoO1xuXHRcdGNvbnN0IGN1cnJlbnRPZmZzZXQgPSBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKTtcblxuXHRcdGlmICgoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRm9yd2FyZCAmJiBjdXJyZW50T2Zmc2V0ID49IG1heE9mZnNldCkgfHxcblx0XHRcdChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5CYWNrd2FyZCAmJiBjdXJyZW50T2Zmc2V0ID09PSAwKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGxldCBuZXh0UGFyYWdyYXBoT2Zmc2V0ID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRm9yd2FyZCA/IG1heE9mZnNldCA6IDA7XG5cdFx0bGV0IGZvdW5kVGV4dCA9IGZhbHNlO1xuXHRcdGxldCBmb3VuZEZpcnN0QnJlYWsgPSBmYWxzZTtcblxuXHRcdGZ1bmN0aW9uIGlzTmV3TGluZShwb3NpdGlvbjogbnVtYmVyLCBkaXJlY3Rpb246IERpcmVjdGlvbik6IGJvb2xlYW4ge1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlW3Bvc2l0aW9uXSA9PT0gXCJcXG5cIiB8fCAodmFsdWVbcG9zaXRpb25dID09PSBcIlxcclwiICYmIHZhbHVlW3Bvc2l0aW9uICsgMV0gPT09IFwiXFxuXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlW3Bvc2l0aW9uXSA9PT0gXCJcXG5cIiB8fCAocG9zaXRpb24gPiAwICYmIHZhbHVlW3Bvc2l0aW9uIC0gMV0gPT09IFwiXFxyXCIgJiYgdmFsdWVbcG9zaXRpb25dID09PSBcIlxcblwiKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBzdGVwID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRm9yd2FyZCA/IDEgOiAtMTtcblx0XHRsZXQgaSA9IGN1cnJlbnRPZmZzZXQ7XG5cblx0XHR3aGlsZSAoKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQgJiYgaSA8IG1heE9mZnNldCkgfHwgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJhY2t3YXJkICYmIGkgPiAwKSkge1xuXHRcdFx0aWYgKGZvdW5kVGV4dCAmJiBpc05ld0xpbmUoaSwgZGlyZWN0aW9uKSkge1xuXHRcdFx0XHRpZiAoZm91bmRGaXJzdEJyZWFrKSB7XG5cdFx0XHRcdFx0bmV4dFBhcmFncmFwaE9mZnNldCA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkZvcndhcmQgPyBpIDogaSArIDE7XG5cdFx0XHRcdFx0aWYgKChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Gb3J3YXJkICYmIHZhbHVlW2ldID09PSBcIlxcclwiKSB8fFxuXHRcdFx0XHRcdFx0KGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJhY2t3YXJkICYmIGkgPiAwICYmIHZhbHVlW2kgLSAxXSA9PT0gXCJcXHJcIikpIHtcblx0XHRcdFx0XHRcdG5leHRQYXJhZ3JhcGhPZmZzZXQgKz0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRm9yd2FyZCA/IDEgOiAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm91bmRGaXJzdEJyZWFrID0gdHJ1ZTtcblx0XHRcdFx0XHRpICs9IHN0ZXA7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvdW5kRmlyc3RCcmVhayA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodmFsdWVbaV0gIT09IFwiXFxuXCIgJiYgdmFsdWVbaV0gIT09IFwiXFxyXCIgJiYgdmFsdWVbaV0gIT09IFwiIFwiKSB7XG5cdFx0XHRcdGZvdW5kVGV4dCA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGkgKz0gc3RlcDtcblx0XHR9XG5cblx0XHRjb25zdCBuZXdQb3MgPSBlZGl0b3Iub2Zmc2V0VG9Qb3MobmV4dFBhcmFncmFwaE9mZnNldCk7XG5cdFx0ZWRpdG9yLnNldEN1cnNvcihuZXdQb3MpO1xuXHR9XG5cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBNkQ7QUFPN0QsSUFBcUIsd0JBQXJCLGNBQW1ELHVCQUFPO0FBQUEsRUFBMUQ7QUFBQTtBQUVDLGtDQUF5QjtBQUFBO0FBQUEsRUFFekIsU0FBUztBQUNSLFlBQVEsSUFBSSxtQ0FBbUM7QUFFL0MsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixNQUFvQjtBQUNwRCxhQUFLLG9CQUFvQixRQUFRLE1BQU07QUFDdEMsaUJBQU8sS0FBSyxTQUFTO0FBQUEsUUFDdEIsQ0FBQztBQUFBLE1BQ0Y7QUFBQSxJQUNELENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFFBQWdCLE1BQW9CO0FBQ3BELGFBQUssb0JB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
